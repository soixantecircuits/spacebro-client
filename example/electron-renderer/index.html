<!-- index.html -->
<html>
<body>
  <div id='log'>
    <h1 id="p1">Log:</h1>
  </div>

  <script>
    const { SpacebroClient } = require('../../dist/spacebro-client')

    function addTextNode(text) {
      let div = document.getElementById( 'log' )
      div.insertAdjacentHTML( 'beforeend', `<p>${text}</p>` )
    }

    const spacebroClient = new SpacebroClient('spacebro.space', 3333, {
      client: {name: 'foo'},
      channelName: 'bar'
    })

    for (const eventName of ['hello', 'world']) {
      spacebroClient.on(eventName, (data) => {
        addTextNode(JSON.stringify(data))
      })
    }
    setTimeout(() => { spacebroClient.emit('hello', { hello: 'world' }) }, 3000)
    setTimeout(() => { spacebroClient.emit('world', { world: 'hello' }) }, 5000)
  </script>
</body>
</html>
